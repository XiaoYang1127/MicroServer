# 监控系统

## 基础

- crontab 定时器
- 业务进程支持定时器
- 推送系统
- 日志系统，包括详细日志，错误日志堆栈

## 1. 服务器硬件资源监控

- 硬盘
  - 从线上项目维护来看，一般是日志比较占日志
  - 提供定时日志打包压缩功能的脚本
- cpu
  - 实时监控线上服务 cpu 变化，及时告警
- 内存
  - 实时监控线上服务内存变化，及时告警

## 2. 服务器进程监控

- 服务进程存活监控
  - 因断电，宕机等客观因素导致进程挂掉，应该有自动检测、自动重启功能
  - 提供定时脚本，定时检查服务脚本是否存活，若死亡，则自动重启

## 3. 脚本进程分析工具

- 业务请求耗时堆栈
  - 从入口到返回，每一阶段耗时情况分析，快速定位问题
  - 以 python 为例， 可以使用 profile
- 业务进程内存分析工具
  - 以 python 为例，可以采用 memory-profiler、memory-analyzer、meliae
- 垃圾回收机制
  - 定期清理脚本进程的垃圾回收
